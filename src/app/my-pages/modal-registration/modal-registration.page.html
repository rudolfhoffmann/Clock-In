<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-button (click)="closeModal(undefined)">
        <ion-icon name="arrow-back" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>Registrieren</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <form [formGroup]="formGroup" (ngSubmit)="register()">

    <!--
    <ion-row class="ion-no-padding">
      <ion-col size="auto" class="ion-no-padding">
        <h5>Supervisor</h5>
      </ion-col>
      <ion-col size=2 class="ion-no-padding">
        <ion-button (click)="infoPopoverAdmin($event)" fill="clear">
          <ion-icon name="information-circle-outline" size="small" slot="icon-only"></ion-icon>
        </ion-button>
      </ion-col>
    </ion-row>
    <ion-item class="ion-no-padding">
      <ion-label position="floating">E-Mail</ion-label>
      <ion-input [disabled]=true formControlName="emailCtrl" type="email"></ion-input>
    </ion-item>
    <span class="val-error" *ngIf="formGroup.controls.emailCtrl.errors?.required">{{valError.REQUIRED}}</span>
    <span class="val-error" *ngIf="formGroup.controls.emailCtrl.errors?.email">{{valError.EMAIL}}</span>
    <ion-item class="ion-no-padding">
      <ion-label position="floating">Supervisor Passwort</ion-label>
      <ion-input formControlName="adminPasswordCtrl" type="password"></ion-input>
    </ion-item>
    <span class="val-error" *ngIf="formGroup.controls.adminPasswordCtrl.errors?.required">{{valError.REQUIRED}}</span>
    <span class="val-error" *ngIf="formGroup.controls.adminPasswordCtrl.errors?.maxlength">{{valError.MAX_L}}</span>
    <ion-item class="ion-no-padding">
      <ion-label position="floating">Supervisor Passwort bestätigen</ion-label>
      <ion-input formControlName="adminPasswordConfirmCtrl" type="password" (keyup.Enter)="register()"></ion-input>
    </ion-item>
    <span class="val-error" *ngIf="formGroup.controls.adminPasswordConfirmCtrl.errors?.required">{{valError.REQUIRED}}</span>
    <span class="val-error" *ngIf="formGroup.controls.adminPasswordConfirmCtrl.errors?.maxlength">{{valError.MAX_L}}</span>
    -->

    <br>

    <ion-row class="ion-no-padding">
      <ion-col size="auto" class="ion-no-padding">
        <h5>Kontozugangsdaten</h5>
      </ion-col>
      <ion-col size=2 class="ion-no-padding">
        <ion-button (click)="infoPopoverAccount($event)" fill="clear">
          <ion-icon name="information-circle-outline" size="small" slot="icon-only"></ion-icon>
        </ion-button>
      </ion-col>
    </ion-row>
    <ion-item class="ion-no-padding">
      <ion-label position="floating">Kontoname</ion-label>
      <ion-input formControlName="customerBranchCtrl" type="text"></ion-input>
    </ion-item>
    <span class="val-error" *ngIf="formGroup.controls.customerBranchCtrl.errors?.required">{{valError.REQUIRED}}</span>
    <span class="val-error" *ngIf="formGroup.controls.customerBranchCtrl.errors?.maxlength">{{valError.MAX_L}}</span>
    <span class="val-error" *ngIf="formGroup.controls.customerBranchCtrl.errors?.pattern">{{valError.PATTERN}}</span>
    <ion-item class="ion-no-padding">
      <ion-label position="floating">Passwort</ion-label>
      <!-- Form can be submitted my clicking the submit button or by clicking the open-button on the keyboard of password-field. -->
      <ion-input formControlName="branchPasswordCtrl" type="text"></ion-input>
    </ion-item>
    <span class="val-error" *ngIf="formGroup.controls.branchPasswordCtrl.errors?.required">{{valError.REQUIRED}}</span>
    <span class="val-error" *ngIf="formGroup.controls.branchPasswordCtrl.errors?.maxlength">{{valError.MAX_L}}</span>
    <ion-text class="hints">
      Achtung! Die Kontozugangsdaten werden weiteren Benutzern weitergegeben. Verwenden Sie somit nicht ihr privates Passwort dafür!
    </ion-text>


    <br>
    <h5>Abo wählen</h5>
    <ion-item lines="none" class="ion-no-padding">
      <ion-button class="ion-no-padding" [disabled]="disableSubscriptions" (click)="chooseSubscription()" *ngIf="!subscriptionChosen" fill="clear" expand="full">Wählen Sie ein Abo</ion-button>
      <ion-button class="ion-no-padding" [disabled]="disableSubscriptions" (click)="chooseSubscription()" *ngIf="subscriptionChosen" fill="clear" expand="full">
        {{subscriptionName}}
      </ion-button>
    </ion-item>
    <ion-text class="hints" *ngIf="disableSubscriptions">
      Sie verwenden bereits ein Abo für diese App. Ein weiteres kostenpflichtiges Abo ist nicht möglich. Sie können allerdings ein kostenloses Konto mit dem 'Business Standard' Paket erstellen.
    </ion-text>
    <ion-item lines="none" class="ion-no-padding ion-padding-vertical">
      <!-- Copy this layout from subscription.component.html and adapt variables!!! -->
      <ion-text *ngIf="subscriptionChosen">
        <ion-text>{{subscriptionTotalPrice}} {{currency}}</ion-text>
        <ion-text>/Monat inkl. MwSt.</ion-text>
        <ion-text *ngIf="subscriptionPeriod==='month' && subscriptionTotalPrice > 0"><br>Monatliche Abrechnung</ion-text>
        <ion-text *ngIf="subscriptionPeriod==='annual' && subscriptionTotalPrice > 0"><br>Jährliche Abrechnung</ion-text>
        <ion-text *ngIf="subscriptionTotalPrice > 0"><br>14 Tage kostenlose Testversion</ion-text>
      </ion-text>
    </ion-item>

    <ion-button class="ion-margin-vertical" [disabled]="!formGroup.valid || !subscriptionChosen" type="submit" expand="full" color="secondary">
      Registrieren
      <ion-icon name="document-text-outline" slot="start"></ion-icon>
    </ion-button>
  </form>
</ion-content>

